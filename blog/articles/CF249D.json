{"title":"CF249D Donkey and Stars","file":"CF249D.json","pic":"/bg/95.jpg","tag":["二维偏序","LIS"],"priority":0,"source":"CF","link":[["LG","https://www.luogu.com.cn/problem/CF249D"],["CF","https://codeforces.com/problemset/problem/249/D"]],"pswd":false,"date":"2021-06-24 18:27","content":"## 题面翻译\n\n坐标系上给出$n$个点\n\n求最多有多少个点依次连成的折线上的线段的斜率在$\\frac{a}{b}$到$\\frac{c}{d}$之间\n\n第一条折线的起点必须从坐标原点开始且坐标原点不计入答案\n\n\n## 题解\n如果 $(x_1,y_1)$ 能与 $(x_2,y_2)$ 连边，则满足\n$$\n\\frac ab<\\frac{y_1-y_2}{x_1-x_2}<\\frac cd\\Longleftrightarrow ax_1-by_1<ax_2-by_2 ,dy_1-cx_1<dy_2-cx_2\n$$\n记 $fi=ax_1-by_1,se=dy_1-cx_1$，按 $fi$ 排序，就是一个最长上升子序列的经典问题。\n\n$\\mathcal{O}(n\\log n)$ 解决应该有手就行\n## 代码\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1e5+10;\nint n,a,b,c,d;\n#define ll long long\n#define pll pair<ll,ll> \npll p[N];\nlong long v[N];\n#define fi first\n#define se second\nint cnt=0;\nsigned main(){\n\tscanf(\"%d %d/%d %d/%d\",&n,&a,&b,&c,&d);\n\tfor(int i=1;i<=n;i++){\n\t\tlong long x,y;scanf(\"%lld%lld\",&x,&y);\n\t\tcnt++;\n\t\tp[cnt].fi=a*x-b*y;\n\t\tp[cnt].se=d*y-c*x;\n\t\tif(p[cnt].fi>=0||p[cnt].se>=0)cnt--;\n\t}\n\tn=cnt;\n\tsort(p+1,p+1+n,[&](pll a,pll b)->bool{return a.fi==b.fi?a.se>b.se:a.fi<b.fi;});\n\tcnt=0;\n\tfor(int i=1;i<=n;i++){\n\t\tif(!cnt||v[cnt]<p[i].se)v[++cnt]=p[i].se;\n\t\telse *lower_bound(v+1,v+1+cnt,p[i].se)=p[i].se;\n\t}\n\tprintf(\"%d\",cnt);\n}\n```"}